<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>台账查询</title>
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="lib/layui/css/layui.css">
	<link rel="stylesheet" href="css/TZCX.css">
</head>
<body>
	<section class="content">
	    <span>投诉查询</span>
	    <p class="rf">投诉><span>投诉查询</span></p>
	   
	    <form id="searchForm" class="layui-form layui-form-item searchForm">
	        <div class="searchFormTop">
	            <label class="layui-form-label" for="TSBT">投诉标题</label>
	            <div class="layui-input-inline">
	                <input type="text" id="TSBT" name="TSBT" autocomplete="off" class="layui-input">
	            </div>
	            <label class="layui-form-label" for="TSLX">投诉类型</label>
	            <div class="layui-input-inline" for="TSLX">
	                <select id="TSLX" name="TSLX" lay-verify="required">
					    <option value=""></option>
					    <option value="0">手机号</option>
					    <option value="1">银行账号</option>
					</select>
	            </div>
	            <label class="layui-form-label" for="TZR">投资人</label>
	            <div class="layui-input-inline">
	                <input type="text" id="TZR" name="TZR" autocomplete="off" class="layui-input">
	            </div>
	        </div>
	        <div class="searchFormMiddle">
	            <label class="layui-form-label" for="KSSJ">发生时间</label>
	            <div class="layui-input-inline">
	                <input type="text" id="KSSJ" name="KSSJ" autocomplete="off" class="layui-input">
	            </div>
	            <label class="layui-form-label" for="DJR">登记人</label>
	            <div class="layui-input-inline">
	                <input type="text" id="DJR" name="DJR" autocomplete="off" class="layui-input">
	            </div>
	            <label class="layui-form-label" for="CLZT">处理状态</label>
	            <div class="layui-input-inline">
	                <select id="DSH" class="layui-input" name="DSH">
	                    <option value="" selected>待审核</option>
	                    <option value="0">所有</option>
	                    <option value="1">止付</option>
	                    <option value="2">监控</option>
	                    <option value="3">查询</option>
	                </select>
	            </div>
	        </div>
	        <input type="button" id="resetBtn" class="layui-btn layui-btn-danger searchFormBtn" value="重置"/>
	        <input type="button" id="searchBtn" class="layui-btn searchFormBtn" value="查询"/>
	    </form>

	    <!--案件列表-->
		<span>案件列表</span>
	    <p class="rf ZDYBT">自定义表头</p>

	    <div id="parent">
	        <table id="tsTable" class="layui-table tsTable">
	            <thead>
	            <tr>
	                <th width="4%">序号</th>
	                <th width="8%">投诉人</th>
	                <th width="12%">手机号</th>
	                <th width="16%">身份证号</th>
	                <th width="8%">投诉日期</th>
	                <th width="8%">投诉类型</th>
	                <th width="28%">投诉内容</th>
	                <th width="8%">处理状态</th>
	                <th width="8%">操作</th>
	            </tr>
	            </thead>
	            <!-- 表格的内容部分 动态生成 -->
	            <tbody>
	            </tbody>
	        </table>
	        <!-- 分页器 -->
	        <div id="demo4" class="pager"></div>

	    </div>
	</section>
<script src="js/jquery-2.1.0.js"></script>
<script src="lib/layui/lay/dest/layui.all.js"></script>
<script>
// 分页器
layui.use(['laypage','layer'],function(){
	var laypage = layui.laypage,
	layer = layui.layer;

	laypage({
		cont:'demo4',
		pages:'100',
		first:false,
		last: false
	});
});
//点击处理按钮 弹出层
//页面层
$('#tsTable tbody').on('click','.doBtn',function(){
	layer.open({
	  type: 2,
	  skin: 'CLYM-style', //加上边框
	  area: ['510px', '400px'], //宽高
	  title: '处理页面',
	  content: 'dealPage.html'
	});
});

// 点击查询按钮 开始显示表格内容
// 如果查询内容不存在 则显示为空
$('#searchBtn').click(function(){
	var html = '';
	$.ajax({
		type:"GET",
		url:"data/tsResult.json",
		success:function(data){
			// console.log(data);
			// 遍历获得数据
			$.each(data,function(key,val){
				html += '<tr>'+
		            		'<td width="4%">'+val.id+'</td>'+
		            		'<td width="8%">'+val.COMPNAME+'</td>'+
		            		'<td width="12%">'+val.COMTELPHONE+'</td>'+
		            		'<td width="16%">'+val.COMPCARD+'</td>'+
		            		'<td width="8%">'+val.DJRQ_S+'</td>'+
		            		'<td width="8%">'+val.COMTYPE+'</td>'+
		            		'<td width="28%">'+val.COMCONTEXT+'</td>'+
		            		'<td width="8%">'+val.STATE+'</td>'+
		            		'<td width="8%" style="text-align:center;"><button class="layui-btn doBtn">'+val.btn+'</button></td>'+
		            	'</tr>';
			});
			// 拼接到tbody上
			$('#tsTable tbody').append(html);
			// 如果显示的数据超过7条 显示分页器
			$('#demo4').css('display','block');
		}
	});
});
	
</script>
</body>
</html>